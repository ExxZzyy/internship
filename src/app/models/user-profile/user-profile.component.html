<div class="profile-container">
  <h3 class="table-caption">Please choose your level to start a test:</h3>

  <mat-radio-group name="levels" class="radio" [(ngModel)]="selectedLevel">
    <mat-radio-button
      class="radio-btn"
      *ngFor="let level of levels; let ind = index"
      [value]="ind + 1"
    >
      {{ levels[ind] }}
    </mat-radio-button>
  </mat-radio-group>

  <button
    *ngIf="!isAssigned"
    [disabled]="!selectedLevel || isStarted"
    mat-raised-button
    color="primary"
    class="start-btn"
    (click)="onStartButtonClick(selectedLevel)"
  >
    START TEST
  </button>

  <div *ngIf="isAssigned">
    <h3 class="table-caption red">You have a test assigned on!</h3>
    <button
      [disabled]="!selectedLevel || isStarted"
      mat-raised-button
      color="primary"
      class="start-btn"
      (click)="onStartAssignedButtonClick(selectedLevel)"
    >
      START ASSIGNED TEST
    </button>
  </div>

  <mat-tab-group mat-stretch-tabs mat-align-tabs="center">
    <mat-tab label="TEST RESULTS">
      <app-user-results-table
        *ngIf="(results$ | async)?.length; else noResults"
        class="user-results-table"
        [results]="(results$ | async)!"
        [levels]="levels"
      >
      </app-user-results-table>
    </mat-tab>

    <ng-template #noResults>
      <p class="table-caption">You have no test results yet</p>
    </ng-template>

    <mat-tab label="ASSIGNED TESTS">
      <app-user-results-table
        *ngIf="(assignedTests$ | async)?.length; else noTests"
        class="user-results-table"
        [results]="(assignedTests$ | async)!"
        [levels]="levels"
      >
      </app-user-results-table>
    </mat-tab>
    <ng-template #noTests>
      <p class="table-caption">You have no assigned tests yet</p>
    </ng-template>
  </mat-tab-group>
</div>
