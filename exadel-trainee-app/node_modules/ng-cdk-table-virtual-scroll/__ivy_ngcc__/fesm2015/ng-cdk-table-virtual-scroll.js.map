{"version":3,"file":"ng-cdk-table-virtual-scroll.js","sources":["ng-cdk-table-virtual-scroll/lib/table-data-source.ts","ng-cdk-table-virtual-scroll/lib/fixed-size-table-virtual-scroll-strategy.ts","ng-cdk-table-virtual-scroll/lib/table-item-size.directive.ts","ng-cdk-table-virtual-scroll/lib/table-virtual-scroll.module.ts","ng-cdk-table-virtual-scroll/public-api.ts","ng-cdk-table-virtual-scroll/ng-cdk-table-virtual-scroll.ts"],"names":[],"mappings":"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","sourcesContent":["import { DataSource } from '@angular/cdk/table';\r\nimport {\r\n  BehaviorSubject,\r\n  Observable,\r\n  ReplaySubject,\r\n  Subject,\r\n  Subscription,\r\n} from 'rxjs';\r\n\r\nexport class TableVirtualScrollDataSource<T> extends DataSource<T> {\r\n  /** Stream that emits when a new data array is set on the data source. */\r\n  private readonly _data: BehaviorSubject<T[]>;\r\n\r\n  /** Stream emitting render data to the table (depends on ordered data changes). */\r\n  private readonly _renderData = new BehaviorSubject<T[]>([]);\r\n\r\n  /**\r\n   * Subscription to the changes that should trigger an update to the table's rendered rows, such\r\n   * as filtering, sorting, pagination, or base data changes.\r\n   */\r\n  protected _renderChangesSubscription: Subscription | null = null;\r\n\r\n  public dataToRender$: Subject<T[]>;\r\n  public dataOfRange$: Subject<T[]>;\r\n  protected streamsReady: boolean;\r\n\r\n  /** Array of data that should be rendered by the table, where each object represents one row. */\r\n  get data() {\r\n    return this._data.value;\r\n  }\r\n  set data(data: T[]) {\r\n    this._data.next(data);\r\n  }\r\n\r\n  constructor(initialData: T[] = []) {\r\n    super();\r\n    this._data = new BehaviorSubject<T[]>(initialData);\r\n    this.updateChangeSubscription();\r\n  }\r\n\r\n  protected updateChangeSubscription() {\r\n    this.initStreams();\r\n    this._renderChangesSubscription = new Subscription();\r\n    this._renderChangesSubscription.add(\r\n      this._data.subscribe((data) => this.dataToRender$.next(data))\r\n    );\r\n    this._renderChangesSubscription.add(\r\n      this.dataOfRange$.subscribe((data) => this._renderData.next(data))\r\n    );\r\n  }\r\n\r\n  protected initStreams() {\r\n    if (!this.streamsReady) {\r\n      this.dataToRender$ = new ReplaySubject<T[]>(1);\r\n      this.dataOfRange$ = new ReplaySubject<T[]>(1);\r\n      this.streamsReady = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Used by the MatTable. Called when it connects to the data source.\r\n   * @private\r\n   */\r\n  connect(): Observable<T[] | readonly T[]> {\r\n    if (!this._renderChangesSubscription) {\r\n      this.updateChangeSubscription();\r\n    }\r\n\r\n    return this._renderData;\r\n  }\r\n\r\n  /**\r\n   * Used by the MatTable. Called when it disconnects from the data source.\r\n   * @private\r\n   */\r\n  disconnect() {\r\n    if (this._renderChangesSubscription) {\r\n      this._renderChangesSubscription.unsubscribe();\r\n    }\r\n    this._renderChangesSubscription = null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { distinctUntilChanged } from 'rxjs/operators';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\nimport { CdkVirtualScrollViewport, VirtualScrollStrategy } from '@angular/cdk/scrolling';\r\nimport { ListRange } from '@angular/cdk/collections';\r\n\r\nexport interface TSVStrategyConfigs {\r\n  rowHeight: number;\r\n  headerHeight: number;\r\n  footerHeight: number;\r\n  bufferMultiplier: number;\r\n}\r\n\r\n@Injectable()\r\nexport class FixedSizeTableVirtualScrollStrategy implements VirtualScrollStrategy {\r\n  private rowHeight!: number;\r\n  private headerHeight!: number;\r\n  private footerHeight!: number;\r\n  private bufferMultiplier!: number;\r\n  private indexChange = new Subject<number>();\r\n  public stickyChange = new Subject<number>();\r\n\r\n  public viewport: CdkVirtualScrollViewport;\r\n\r\n  public renderedRangeStream = new BehaviorSubject<ListRange>({start: 0, end: 0});\r\n\r\n  public scrolledIndexChange = this.indexChange.pipe(distinctUntilChanged());\r\n\r\n  get dataLength(): number {\r\n    return this._dataLength;\r\n  }\r\n\r\n  set dataLength(value: number) {\r\n    this._dataLength = value;\r\n    this.onDataLengthChanged();\r\n  }\r\n\r\n  private _dataLength = 0;\r\n\r\n  public attach(viewport: CdkVirtualScrollViewport): void {\r\n    this.viewport = viewport;\r\n    this.viewport.renderedRangeStream.subscribe(this.renderedRangeStream);\r\n    this.onDataLengthChanged();\r\n  }\r\n\r\n  public detach(): void {\r\n    this.indexChange.complete();\r\n    this.stickyChange.complete();\r\n    this.renderedRangeStream.complete();\r\n  }\r\n\r\n  public onContentScrolled(): void {\r\n    this.updateContent();\r\n  }\r\n\r\n  public onDataLengthChanged(): void {\r\n    if (this.viewport) {\r\n      this.viewport.setTotalContentSize(this.dataLength * this.rowHeight + this.headerHeight + this.footerHeight);\r\n    }\r\n    this.updateContent();\r\n  }\r\n\r\n  public onContentRendered(): void {\r\n    // no-op\r\n  }\r\n\r\n  public onRenderedOffsetChanged(): void {\r\n    // no-op\r\n  }\r\n\r\n  public scrollToIndex(index: number, behavior?: ScrollBehavior): void {\r\n    if (!this.viewport || !this.rowHeight) {\r\n      return;\r\n    }\r\n    this.viewport.scrollToOffset((index - 1 ) * this.rowHeight + this.headerHeight);\r\n  }\r\n\r\n  public setConfig(configs: TSVStrategyConfigs) {\r\n    const {rowHeight, headerHeight, footerHeight, bufferMultiplier} = configs;\r\n    if (\r\n      this.rowHeight === rowHeight\r\n      && this.headerHeight === headerHeight\r\n      && this.footerHeight === footerHeight\r\n      && this.bufferMultiplier === bufferMultiplier\r\n    ) {\r\n      return;\r\n    }\r\n    this.rowHeight = rowHeight;\r\n    this.headerHeight = headerHeight;\r\n    this.footerHeight = footerHeight;\r\n    this.bufferMultiplier = bufferMultiplier;\r\n    this.onDataLengthChanged();\r\n  }\r\n\r\n  private updateContent() {\r\n    if (!this.viewport || !this.rowHeight) {\r\n      return;\r\n    }\r\n    const scrollOffset = this.viewport.measureScrollOffset();\r\n    const amount = Math.ceil(this.viewport.getViewportSize() / this.rowHeight);\r\n    const offset = Math.max(scrollOffset - this.headerHeight, 0);\r\n    const buffer = Math.ceil(amount * this.bufferMultiplier);\r\n\r\n    const skip = Math.round(offset / this.rowHeight);\r\n    const index = Math.max(0, skip);\r\n    const start = Math.max(0, index - buffer);\r\n    const end = Math.min(this.dataLength, index + amount + buffer);\r\n    const renderedOffset = start * this.rowHeight;\r\n    this.viewport.setRenderedContentOffset(renderedOffset);\r\n    this.viewport.setRenderedRange({start, end});\r\n    this.indexChange.next(index);\r\n    this.stickyChange.next(renderedOffset);\r\n  }\r\n}\r\n","import {\r\n  AfterContentInit,\r\n  ContentChild,\r\n  Directive,\r\n  forwardRef,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport {\r\n  distinctUntilChanged,\r\n  filter,\r\n  map,\r\n  switchMap,\r\n  takeUntil,\r\n  takeWhile,\r\n  tap,\r\n} from 'rxjs/operators';\r\nimport { Subject } from 'rxjs';\r\nimport { VIRTUAL_SCROLL_STRATEGY } from '@angular/cdk/scrolling';\r\nimport { CdkHeaderRowDef, CdkTable } from '@angular/cdk/table';\r\n\r\nimport { TableVirtualScrollDataSource } from './table-data-source';\r\nimport { FixedSizeTableVirtualScrollStrategy } from './fixed-size-table-virtual-scroll-strategy';\r\n\r\nexport function _tableVirtualScrollDirectiveStrategyFactory(\r\n  tableDir: TableItemSizeDirective\r\n) {\r\n  return tableDir.scrollStrategy;\r\n}\r\n\r\nconst stickyHeaderSelector = '.cdk-header-row .cdk-table-sticky';\r\nconst stickyFooterSelector = '.cdk-footer-row .cdk-table-sticky';\r\n\r\nconst defaults = {\r\n  rowHeight: 48,\r\n  headerHeight: 56,\r\n  headerEnabled: true,\r\n  footerHeight: 48,\r\n  footerEnabled: false,\r\n  bufferMultiplier: 0.7,\r\n};\r\n\r\n@Directive({\r\n  selector: 'cdk-virtual-scroll-viewport[tvsItemSize]',\r\n  providers: [\r\n    {\r\n      provide: VIRTUAL_SCROLL_STRATEGY,\r\n      useFactory: _tableVirtualScrollDirectiveStrategyFactory,\r\n      deps: [forwardRef(() => TableItemSizeDirective)],\r\n    },\r\n  ],\r\n})\r\nexport class TableItemSizeDirective\r\n  implements OnChanges, AfterContentInit, OnDestroy {\r\n  private alive = true;\r\n\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('tvsItemSize')\r\n  rowHeight = defaults.rowHeight;\r\n\r\n  @Input()\r\n  headerEnabled = defaults.headerEnabled;\r\n\r\n  @Input()\r\n  headerHeight = defaults.headerHeight;\r\n\r\n  @Input()\r\n  footerEnabled = defaults.footerEnabled;\r\n\r\n  @Input()\r\n  footerHeight = defaults.footerHeight;\r\n\r\n  @Input()\r\n  bufferMultiplier = defaults.bufferMultiplier;\r\n\r\n  @ContentChild(CdkTable, { static: false })\r\n  table: CdkTable<any>;\r\n\r\n  scrollStrategy = new FixedSizeTableVirtualScrollStrategy();\r\n\r\n  dataSourceChanges = new Subject<void>();\r\n\r\n  private stickyPositions: Map<HTMLElement, number>;\r\n\r\n  constructor(private zone: NgZone) {}\r\n\r\n  ngOnDestroy() {\r\n    this.alive = false;\r\n    this.dataSourceChanges.complete();\r\n  }\r\n\r\n  private isAlive() {\r\n    return () => this.alive;\r\n  }\r\n\r\n  private isStickyEnabled(): boolean {\r\n    return (\r\n      !!this.scrollStrategy.viewport &&\r\n      (this.table['_headerRowDefs'] as CdkHeaderRowDef[])\r\n        .map((def) => def.sticky)\r\n        .reduce((prevState, state) => prevState && state, true)\r\n    );\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    const switchDataSourceOrigin = this.table['_switchDataSource'];\r\n    this.table['_switchDataSource'] = (dataSource: any) => {\r\n      switchDataSourceOrigin.call(this.table, dataSource);\r\n      this.connectDataSource(dataSource);\r\n    };\r\n\r\n    this.connectDataSource(this.table.dataSource);\r\n\r\n    this.scrollStrategy.stickyChange\r\n      .pipe(\r\n        filter(() => this.isStickyEnabled()),\r\n        tap(() => {\r\n          if (!this.stickyPositions) {\r\n            this.initStickyPositions();\r\n          }\r\n        }),\r\n        takeWhile(this.isAlive())\r\n      )\r\n      .subscribe((stickyOffset) => {\r\n        this.setSticky(stickyOffset);\r\n      });\r\n  }\r\n\r\n  connectDataSource(dataSource: any) {\r\n    this.dataSourceChanges.next();\r\n    if (dataSource instanceof TableVirtualScrollDataSource) {\r\n      dataSource.dataToRender$\r\n        .pipe(\r\n          distinctUntilChanged(),\r\n          takeUntil(this.dataSourceChanges),\r\n          takeWhile(this.isAlive()),\r\n          tap((data) => (this.scrollStrategy.dataLength = data.length)),\r\n          switchMap((data) =>\r\n            this.scrollStrategy.renderedRangeStream.pipe(\r\n              map(({ start, end }) =>\r\n                typeof start !== 'number' || typeof end !== 'number'\r\n                  ? data\r\n                  : data.slice(start, end)\r\n              )\r\n            )\r\n          )\r\n        )\r\n        .subscribe((data) => {\r\n          this.zone.run(() => {\r\n            dataSource.dataOfRange$.next(data);\r\n          });\r\n        });\r\n    } else {\r\n      throw new Error(\r\n        '[tvsItemSize] requires TableVirtualScrollDataSource be set as [dataSource] of [cdk-table]'\r\n      );\r\n    }\r\n  }\r\n\r\n  ngOnChanges() {\r\n    const config = {\r\n      rowHeight: +this.rowHeight || defaults.rowHeight,\r\n      headerHeight: this.headerEnabled\r\n        ? +this.headerHeight || defaults.headerHeight\r\n        : 0,\r\n      footerHeight: this.footerEnabled\r\n        ? +this.footerHeight || defaults.footerHeight\r\n        : 0,\r\n      bufferMultiplier: +this.bufferMultiplier || defaults.bufferMultiplier,\r\n    };\r\n    this.scrollStrategy.setConfig(config);\r\n  }\r\n\r\n  setSticky(offset) {\r\n    this.scrollStrategy.viewport.elementRef.nativeElement\r\n      .querySelectorAll(stickyHeaderSelector)\r\n      .forEach((el: HTMLElement) => {\r\n        const parent = el.parentElement;\r\n        let baseOffset = 0;\r\n        if (this.stickyPositions.has(parent)) {\r\n          baseOffset = this.stickyPositions.get(parent);\r\n        }\r\n        el.style.top = `${baseOffset - offset}px`;\r\n      });\r\n    this.scrollStrategy.viewport.elementRef.nativeElement\r\n      .querySelectorAll(stickyFooterSelector)\r\n      .forEach((el: HTMLElement) => {\r\n        const parent = el.parentElement;\r\n        let baseOffset = 0;\r\n        if (this.stickyPositions.has(parent)) {\r\n          baseOffset = this.stickyPositions.get(parent);\r\n        }\r\n        el.style.bottom = `${-baseOffset + offset}px`;\r\n      });\r\n  }\r\n\r\n  private initStickyPositions() {\r\n    this.stickyPositions = new Map<HTMLElement, number>();\r\n    this.scrollStrategy.viewport.elementRef.nativeElement\r\n      .querySelectorAll(stickyHeaderSelector)\r\n      .forEach((el) => {\r\n        const parent = el.parentElement;\r\n        if (!this.stickyPositions.has(parent)) {\r\n          this.stickyPositions.set(parent, parent.offsetTop);\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { TableItemSizeDirective } from './table-item-size.directive';\r\n\r\n@NgModule({\r\n  declarations: [TableItemSizeDirective],\r\n  exports: [TableItemSizeDirective],\r\n  imports: [],\r\n})\r\nexport class TableVirtualScrollModule {}\r\n","/*\r\n * Public API Surface of ng-fixed-size-table-virtual-scroll\r\n */\r\n\r\nexport * from './lib/table-virtual-scroll.module';\r\nexport * from './lib/table-item-size.directive';\r\nexport * from './lib/fixed-size-table-virtual-scroll-strategy';\r\nexport * from './lib/table-data-source';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}